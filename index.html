<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oh My Nosh</title>
  <style>
    /* (Same styles as before - carousel, buttons, layout etc.) */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #fff8f9;
      color: #333;
    }
    header {
      background-color: #f5e6ed;
      text-align: center;
      padding: 2rem 1rem;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header img {
      max-width: 300px;
    }
    nav {
      text-align: center;
      background-color: #ffeef4;
      padding: 1rem;
    }
    nav a {
      margin: 0 1rem;
      text-decoration: none;
      color: #d48fa4;
      font-weight: bold;
    }
    section {
      padding: 2rem 1rem;
      max-width: 900px;
      margin: auto;
    }
    h2 {
      color: #d48fa4;
      margin-top: 2rem;
    }
    .carousel {
      position: relative;
      max-width: 900px;
      margin: 1rem auto 2rem auto;
      overflow: hidden;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(212, 143, 164, 0.3);
      background: white;
    }
    .carousel-track {
      display: flex;
      transition: transform 0.4s ease-in-out;
      touch-action: pan-y;
    }
    .carousel-slide {
      min-width: 100%;
      user-select: none;
      pointer-events: none;
      position: relative;
    }
    .carousel-slide img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 10px;
      pointer-events: auto;
      user-select: none;
    }
    .carousel-button {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(212, 143, 164, 0.8);
      border: none;
      color: white;
      font-size: 2rem;
      padding: 0.3rem 0.7rem;
      border-radius: 50%;
      cursor: pointer;
      user-select: none;
      z-index: 10;
      transition: background 0.3s;
    }
    .carousel-button:hover {
      background: #d48fa4;
    }
    .carousel-button.prev {
      left: 10px;
    }
    .carousel-button.next {
      right: 10px;
    }
    .carousel-dots {
      text-align: center;
      margin-top: 10px;
    }
    .carousel-dots button {
      border: none;
      background: #d48fa4;
      width: 12px;
      height: 12px;
      margin: 0 5px;
      border-radius: 50%;
      cursor: pointer;
      opacity: 0.5;
      transition: opacity 0.3s;
    }
    .carousel-dots button.active {
      opacity: 1;
      box-shadow: 0 0 5px #d48fa4;
    }
    .contact-button {
      display: inline-block;
      margin: 0.5rem 0;
      padding: 0.75rem 1.5rem;
      background-color: #d48fa4;
      color: white;
      border: none;
      border-radius: 5px;
      text-decoration: none;
      cursor: pointer;
    }
    footer {
      text-align: center;
      padding: 1rem;
      background-color: #ffeef4;
    }
    input, select {
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    @media (max-width: 768px) {
      header img {
        max-width: 90%;
      }
      nav a {
        display: block;
        margin: 0.5rem 0;
      }
      .contact-button {
        display: block;
        width: 90%;
        margin: 10px auto;
        text-align: center;
      }
      section {
        padding: 1rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.jpg" alt="Oh My Nosh Logo" />
  </header>
  <nav>
    <a href="#about">About</a>
    <a href="#services">Products</a>
    <a href="#gallery">Gallery</a>
    <a href="#classes">Classes</a>
    <a href="#contact">Contact</a>
  </nav>

  <section id="about">
    <h2>About Us</h2>
    <p>Oh My Nosh specializes in custom cake designs, delightful cupcakes, cookies, cake pops, and dessert jars for every sweet occasion‚Äîbe it weddings, birthdays, gender reveals, or DIY fun at home. We bring captivating cakes and other sweet necessities to life with creativity and love!</p>
  </section>

  <section id="services">
    <h2>Our Treats</h2>
    <ul>
      <li>Cakes (custom and celebration)</li>
      <li>Cupcakes</li>
      <li>Cookies (custom & DIY)</li>
      <li>Cake Pops</li>
      <li>Dessert Jars</li>
      <li>DIY Kits: Cookies & Cakes</li>
    </ul>
  </section>

  <section id="gallery">
    <h2>Gallery</h2>

    <!-- Carousel containers with data attributes for dynamic loading -->
    <h3>Cakes</h3>
    <div class="carousel" data-prefix="Cake" aria-label="Cakes Carousel">
      <button class="carousel-button prev" aria-label="Previous Cake">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cake">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cake Carousel Navigation"></div>
    </div>

    <h3>Cookies</h3>
    <div class="carousel" data-prefix="Cookies" aria-label="Cookies Carousel">
      <button class="carousel-button prev" aria-label="Previous Cookie">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cookie">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cookies Carousel Navigation"></div>
    </div>

    <h3>Cupcakes</h3>
    <div class="carousel" data-prefix="Cupcake" aria-label="Cupcakes Carousel">
      <button class="carousel-button prev" aria-label="Previous Cupcake">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cupcake">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cupcakes Carousel Navigation"></div>
    </div>

    <h3>Cake & Cookies</h3>
    <div class="carousel" data-prefix="Cake&Cookies" aria-label="Cake and Cookies Carousel">
      <button class="carousel-button prev" aria-label="Previous Cake and Cookies">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cake and Cookies">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cake and Cookies Carousel Navigation"></div>
    </div>

    <h3>Cake & Cupcakes</h3>
    <div class="carousel" data-prefix="Cake&Cupcakes" aria-label="Cake and Cupcakes Carousel">
      <button class="carousel-button prev" aria-label="Previous Cake and Cupcakes">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cake and Cupcakes">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cake and Cupcakes Carousel Navigation"></div>
    </div>

    <h3>Dessert Jars</h3>
    <div class="carousel" data-prefix="DessertJars" aria-label="Dessert Jars Carousel">
      <button class="carousel-button prev" aria-label="Previous Dessert Jar">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Dessert Jar">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Dessert Jars Carousel Navigation"></div>
    </div>

    <h3>Cake Pops</h3>
    <div class="carousel" data-prefix="CakePops" aria-label="Cake Pops Carousel">
      <button class="carousel-button prev" aria-label="Previous Cake Pop">&#10094;</button>
      <div class="carousel-track"></div>
      <button class="carousel-button next" aria-label="Next Cake Pop">&#10095;</button>
      <div class="carousel-dots" role="tablist" aria-label="Cake Pops Carousel Navigation"></div>
    </div>
  </section>

  <section id="classes">
    <h2>Kids' Baking Classes</h2>
    <p>Oh My Nosh now offers fun and interactive baking classes for children! Whether it‚Äôs cupcakes, cookies, or cake kits, your little one can learn the basics of baking in a safe, exciting environment.</p>
    <ul>
      <li>üí∏ <strong>R100 per child, per lesson</strong></li>
      <li>üìù <strong>R170 once-off sign-up fee per child</strong></li>
      <li>üìç Based in the general surrounds of Silvamonte, Johannesburg</li>
      <li>üöó Additional travel costs may apply for locations further out</li>
    </ul>
    <p>To find out more or to book a class, get in touch with us!</p>
  </section>

  <section id="contact">
    <h2>Get in Touch</h2>
    <p>Email: <a href="mailto:rameysasha@gmail.com">rameysasha@gmail.com</a></p>
    <p>Phone: <a href="tel:+27799750908">(+27) 79 975 0908</a></p>
    <p>Location: Silvamonte, Johannesburg, Gauteng</p>

    <h3>Place an Order</h3>
    <form id="whatsapp-enquiry-form" onsubmit="event.preventDefault(); sendWhatsAppEnquiry();">
      <label for="name">Your Name:</label><br />
      <input type="text" id="name" name="name" required style="padding: 0.5rem; width: 100%; margin: 0.5rem 0;" /><br />

      <label for="product">What would you like to order?</label><br />
      <select id="product" name="product" required style="padding: 0.5rem; width: 100%; margin: 0.5rem 0;">
        <option value="">--Select a Product--</option>
        <option value="Custom Cake">Custom Cake</option>
        <option value="Cupcakes">Cupcakes</option>
        <option value="Cookies">Cookies</option>
        <option value="Cake Pops">Cake Pops</option>
        <option value="Dessert Jars">Dessert Jars</option>
        <option value="DIY Kit">DIY Kit</option>
        <option value="Other">Other</option>
      </select><br />

      <label for="budget">Budget (ZAR):</label><br />
      <input type="number" id="budget" name="budget" required style="padding: 0.5rem; width: 100%; margin: 0.5rem 0;" /><br />

      <label for="order-date">Preferred Date:</label><br />
      <input type="date" id="order-date" name="order-date" required style="padding: 0.5rem; width: 100%; margin: 0.5rem 0;" /><br />

      <button class="contact-button" type="submit">Send Enquiry via WhatsApp</button>
    </form>

    <a class="contact-button" href="https://www.instagram.com/ohmynoshh" target="_blank" rel="noopener">Instagram</a>
    <a class="contact-button" href="https://www.facebook.com/share/1Eq7thDPyU/" target="_blank" rel="noopener">Facebook</a>
  </section>

  <footer>
    <p>¬© 2025 Oh My Nosh. All rights reserved.</p>
  </footer>

  <div class="back-to-top" title="Back to top" onclick="scrollToTop()">‚¨ÜÔ∏è</div>

  <script>
    // Scroll to top button
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: "smooth" });
    }
    window.addEventListener("scroll", () => {
      const btn = document.querySelector(".back-to-top");
      btn.style.display = window.scrollY > 300 ? "block" : "none";
    });

    // Function to check if image exists by trying to load it
    function imageExists(url) {
      return new Promise((resolve) => {
        const img = new Image();
        img.onload = () => resolve(true);
        img.onerror = () => resolve(false);
        img.src = url;
      });
    }

    // Dynamically load images for each carousel
    async function loadCarouselImages(carousel, prefix) {
      const track = carousel.querySelector('.carousel-track');
      const dotsNav = carousel.querySelector('.carousel-dots');

      let index = 1;
      const maxImages = 50; // max tries to avoid infinite loops
      while (index <= maxImages) {
        const imageUrl = `${prefix}${index}.jpg`;
        // eslint-disable-next-line no-await-in-loop
        const exists = await imageExists(imageUrl);
        if (!exists) break;

        // Create slide
        const slide = document.createElement('div');
        slide.className = 'carousel-slide';

        const img = document.createElement('img');
        img.src = imageUrl;
        img.alt = `${prefix} ${index}`;
        img.draggable = false;

        slide.appendChild(img);
        track.appendChild(slide);
        index++;
      }

      if (index === 1) {
        // No images found
        track.innerHTML = '<p style="padding:1rem; text-align:center; color:#999;">No images available.</p>';
      }
    }

    // Carousel setup
    function initCarousel(carousel) {
      const track = carousel.querySelector('.carousel-track');
      const prevButton = carousel.querySelector('.carousel-button.prev');
      const nextButton = carousel.querySelector('.carousel-button.next');
      const dotsNav = carousel.querySelector('.carousel-dots');

      let currentIndex = 0;
      const slides = track.children;
      const slideCount = slides.length;

      // Create dots based on number of slides
      dotsNav.innerHTML = '';
      for (let i = 0; i < slideCount; i++) {
        const dot = document.createElement('button');
        dot.setAttribute('aria-label', `Slide ${i + 1}`);
        if (i === 0) dot.classList.add('active');
        dot.addEventListener('click', () => {
          currentIndex = i;
          updateCarousel();
        });
        dotsNav.appendChild(dot);
      }
      const dots = dotsNav.children;

      function updateCarousel() {
        track.style.transform = `translateX(-${currentIndex * 100}%)`;
        for (let i = 0; i < dots.length; i++) {
          dots[i].classList.toggle('active', i === currentIndex);
        }
      }

      function nextSlide() {
        currentIndex = (currentIndex + 1) % slideCount;
        updateCarousel();
      }

      function prevSlide() {
        currentIndex = (currentIndex - 1 + slideCount) % slideCount;
        updateCarousel();
      }

      nextButton.addEventListener('click', nextSlide);
      prevButton.addEventListener('click', prevSlide);

      // Touch support
      let startX = 0;
      let isDragging = false;

      track.addEventListener('touchstart', (e) => {
        startX = e.touches[0].clientX;
        isDragging = true;
      });

      track.addEventListener('touchend', (e) => {
        if (!isDragging) return;
        const endX = e.changedTouches[0].clientX;
        const diff = endX - startX;
        if (diff > 50) prevSlide();
        else if (diff < -50) nextSlide();
        isDragging = false;
      });

      updateCarousel();
    }

    // Initialize all carousels by loading images first, then init carousel
    async function setupAllCarousels() {
      const carousels = document.querySelectorAll('.carousel');
      for (const carousel of carousels) {
        const prefix = carousel.getAttribute('data-prefix');
        await loadCarouselImages(carousel, prefix);
        initCarousel(carousel);
      }
    }

    // Run on page load
    window.addEventListener('DOMContentLoaded', () => {
      setupAllCarousels();
    });

    // WhatsApp enquiry form send
    function sendWhatsAppEnquiry() {
      const name = document.getElementById("name").value.trim();
      const product = document.getElementById("product").value;
      const budget = document.getElementById("budget").value;
      const date = document.getElementById("order-date").value;

      if (!name || !product || !budget || !date) {
        alert("Please fill in all fields.");
        return;
      }

      const formattedDate = new Date(date).toLocaleDateString("en-ZA", {
        day: "numeric",
        month: "long",
        year: "numeric",
      });

      const message = `Hi! My name is ${name}. I'd like to enquire about ordering a ${product} for ${formattedDate}. My budget is R${budget}. Can you assist?`;
      const encodedMessage = encodeURIComponent(message);
      const phone = "27799750908";

      window.open(`https://wa.me/${phone}?text=${encodedMessage}`, "_blank");
    }
  </script>
</body>
</html>
