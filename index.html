<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Oh My Nosh</title>
<style>
  :root {
    --dusty-rose: #c08081;
    --sage-green: #9ba997;
    --cream: #f9f6f2;
    --dark-text: #4b4b3f;
    --light-text: #ffffff;
  }
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    font-family: 'Georgia', serif;
    background-color: var(--cream);
    color: var(--dark-text);
    line-height: 1.6;
  }
  header {
    background-color: var(--sage-green);
    padding: 20px 0 10px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  }
  header img {
    max-width: 180px;
    height: auto;
  }
  nav {
    margin-top: 10px;
    text-align: center;
  }
  nav a {
    font-weight: 600;
    margin: 0 15px;
    font-size: 1.1rem;
    letter-spacing: 0.05em;
    color: var(--dark-text);
    text-decoration: none;
  }
  nav a:hover {
    color: var(--dusty-rose);
  }
  main {
    max-width: 960px;
    margin: 40px auto 80px;
    padding: 0 15px;
  }
  section {
    margin-bottom: 60px;
  }
  h1, h2 {
    font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
    color: var(--dusty-rose);
    margin-bottom: 15px;
  }
  /* WhatsApp Floating Button */
  .whatsapp-float {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background-color: var(--sage-green);
    color: var(--light-text);
    width: 60px;
    height: 60px;
    border-radius: 50%;
    text-align: center;
    font-size: 34px;
    line-height: 60px;
    box-shadow: 0 6px 14px rgba(0,0,0,0.3);
    cursor: pointer;
    z-index: 1001;
    transition: background-color 0.3s ease;
  }
  .whatsapp-float:hover {
    background-color: var(--dusty-rose);
  }
  /* Modal Overlay */
  .modal-overlay {
    position: fixed;
    display: none;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    z-index: 2000;
    justify-content: center;
    align-items: center;
  }
  .modal-overlay.active {
    display: flex;
  }
  /* Modal Content */
  .modal {
    background: var(--light-text);
    border-radius: 12px;
    padding: 25px;
    max-width: 400px;
    width: 90%;
    box-shadow: 0 6px 15px rgba(156, 137, 137, 0.3);
    position: relative;
  }
  .modal h3 {
    margin-bottom: 20px;
    color: var(--dusty-rose);
    font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
    text-align: center;
  }
  .modal label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
    color: var(--dusty-rose);
  }
  .modal input,
  .modal textarea,
  .modal select {
    width: 100%;
    padding: 10px 14px;
    margin-bottom: 15px;
    border: 1.5px solid var(--sage-green);
    border-radius: 8px;
    font-size: 1rem;
    font-family: inherit;
    transition: border-color 0.3s ease;
  }
  .modal input:focus,
  .modal textarea:focus,
  .modal select:focus {
    outline: none;
    border-color: var(--dusty-rose);
    box-shadow: 0 0 8px var(--dusty-rose);
  }
  .modal button {
    background-color: var(--dusty-rose);
    color: var(--light-text);
    font-weight: 700;
    padding: 14px 30px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1.1rem;
    letter-spacing: 0.05em;
    transition: background-color 0.3s ease;
    width: 100%;
  }
  .modal button:hover {
    background-color: var(--sage-green);
  }
  .close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 22px;
    font-weight: 700;
    color: var(--dusty-rose);
    cursor: pointer;
  }
</style>
</head>
<body>

<header>
  <img src="logo.png" alt="Oh My Nosh Logo" />
  <nav>
    <a href="#cakes">Cakes</a>
    <a href="#cookies">Cookies</a>
    <a href="#cupcakes">Cupcakes</a>
    <a href="#dessert-jars">Dessert Jars</a>
    <a href="#kids-baking">Kids Baking Class</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<main>
  <!-- Example content sections -->
  <section id="cakes"><h1>Cakes</h1></section>
  <section id="cookies"><h1>Cookies</h1></section>
  <section id="cupcakes"><h1>Cupcakes</h1></section>
  <section id="dessert-jars"><h1>Dessert Jars</h1></section>
  <section id="kids-baking"><h1>Kids Baking Class</h1></section>
  <section id="contact"><h1>Contact Us</h1></section>
</main>

<!-- WhatsApp Floating Button -->
<div class="whatsapp-float" id="whatsappBtn" aria-label="Open WhatsApp enquiry form" role="button" tabindex="0">&#x2709;</div>

<!-- WhatsApp Enquiry Modal -->
<div class="modal-overlay" id="whatsappModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
  <div class="modal" role="document">
    <div class="close-btn" id="closeModalBtn" role="button" tabindex="0" aria-label="Close WhatsApp enquiry form">&times;</div>
    <h3 id="modalTitle">Send an Enquiry</h3>

    <form id="whatsappForm" novalidate>
      <label for="enquiry-type">Select Enquiry Type</label>
      <select id="enquiry-type" name="enquiry-type" required>
        <option value="" disabled selected>Select an option</option>
        <option value="wedding">Wedding Cake Enquiry</option>
        <option value="kids">Kids Baking Class</option>
        <option value="birthday">Birthday Order</option>
        <option value="general">General Enquiry</option>
      </select>

      <!-- Common fields -->
      <label for="user-name">Your Name</label>
      <input type="text" id="user-name" name="user-name" required placeholder="Full name" />

      <!-- Wedding Fields -->
      <div id="wedding-fields" style="display:none;">
        <label for="wedding-date">Wedding Date</label>
        <input type="date" id="wedding-date" name="wedding-date" />

        <label for="wedding-budget">Budget</label>
        <input type="text" id="wedding-budget" name="wedding-budget" placeholder="e.g., R5000 - R10000" />

        <label for="wedding-ideas">Describe your wedding cake idea</label>
        <textarea id="wedding-ideas" name="wedding-ideas" rows="3" placeholder="Your ideas or special requests"></textarea>

        <label for="wedding-image">Upload an Image (optional)</label>
        <input type="file" id="wedding-image" name="wedding-image" accept="image/*" />
      </div>

      <!-- Kids Baking Class Fields -->
      <div id="kids-fields" style="display:none;">
        <label for="child-name">Child's Name</label>
        <input type="text" id="child-name" name="child-name" placeholder="Child's full name" />

        <label for="age-group">Age Group</label>
        <select id="age-group" name="age-group">
          <option value="" disabled selected>Select age group</option>
          <option value="3-5 years">3-5 years</option>
          <option value="6-8 years">6-8 years</option>
          <option value="9-12 years">9-12 years</option>
          <option value="13+ years">13+ years</option>
        </select>

        <label for="class-date">Desired Class Date</label>
        <input type="date" id="class-date" name="class-date" />
        
        <label for="parent-email">Parent's Email</label>
        <input type="email" id="parent-email" name="parent-email" placeholder="Parent or guardian email" />
        
        <label for="kids-message">Additional Message (Optional)</label>
        <textarea id="kids-message" name="kids-message" rows="3" placeholder="Any special requests or info"></textarea>
      </div>

      <!-- Birthday Fields -->
      <div id="birthday-fields" style="display:none;">
        <label for="birthday-date">Birthday Date</label>
        <input type="date" id="birthday-date" name="birthday-date" />
        <label for="birthday-message">Additional Message</label>
        <textarea id="birthday-message" name="birthday-message" rows="3" placeholder="Birthday details or requests"></textarea>
      </div>

      <!-- General Enquiry Fields -->
      <div id="general-fields" style="display:none;">
        <label for="general-message">Message</label>
        <textarea id="general-message" name="general-message" rows="4" placeholder="Write your message here"></textarea>
      </div>

      <button type="submit">Send via WhatsApp</button>
    </form>
  </div>
</div>

<script>
  const phoneNumber = '27799750908';

  const whatsappBtn = document.getElementById('whatsappBtn');
  const modal = document.getElementById('whatsappModal');
  const closeModalBtn = document.getElementById('closeModalBtn');
  const enquiryTypeSelect = document.getElementById('enquiry-type');

  // Field containers
  const weddingFields = document.getElementById('wedding-fields');
  const kidsFields = document.getElementById('kids-fields');
  const birthdayFields = document.getElementById('birthday-fields');
  const generalFields = document.getElementById('general-fields');

  // Show/hide fields based on enquiry type
  enquiryTypeSelect.addEventListener('change', () => {
    const val = enquiryTypeSelect.value;

    weddingFields.style.display = val === 'wedding' ? 'block' : 'none';
    kidsFields.style.display = val === 'kids' ? 'block' : 'none';
    birthdayFields.style.display = val === 'birthday' ? 'block' : 'none';
    generalFields.style.display = val === 'general' ? 'block' : 'none';

    toggleRequiredFields(val);
  });

  function toggleRequiredFields(type) {
    // Remove all required first
    weddingFields.querySelectorAll('input,textarea,select').forEach(el => el.required = false);
    kidsFields.querySelectorAll('input,textarea,select').forEach(el => el.required = false);
    birthdayFields.querySelectorAll('input,textarea,select').forEach(el => el.required = false);
    generalFields.querySelectorAll('textarea').forEach(el => el.required = false);

    switch(type) {
      case 'wedding':
        document.getElementById('wedding-date').required = true;
        document.getElementById('wedding-budget').required = true;
        break;
      case 'kids':
        document.getElementById('child-name').required = true;
        document.getElementById('age-group').required = true;
        document.getElementById('class-date').required = true;
        document.getElementById('parent-email').required = true;
        break;
      case 'birthday':
        document.getElementById('birthday-date').required = true;
        break;
      case 'general':
        document.getElementById('general-message').required = true;
        break;
    }
  }

  // Open modal
  whatsappBtn.addEventListener('click', () => {
    modal.classList.add('active');
    enquiryTypeSelect.focus();
  });

  // Close modal
  closeModalBtn.addEventListener('click', () => {
    closeModal();
  });

  // Close modal on clicking outside modal content
  modal.addEventListener('click', (e) => {
    if (e.target === modal) {
      closeModal();
    }
  });

  // Keyboard accessibility for close button and whatsapp button
  closeModalBtn.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      closeModal();
    }
  });
  whatsappBtn.addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      whatsappBtn.click();
    }
  });

  function closeModal() {
    modal.classList.remove('active');
    document.getElementById('whatsappForm').reset();
    weddingFields.style.display = 'none';
    kidsFields.style.display = 'none';
    birthdayFields.style.display = 'none';
    generalFields.style.display = 'none';
  }

  // Form submission
  document.getElementById('whatsappForm').addEventListener('submit', function(e) {
    e.preventDefault();

    const enquiryType = enquiryTypeSelect.value;
    const userName = document.getElementById('user-name').value.trim();

    if (!enquiryType) {
      alert('Please select an enquiry type.');
      enquiryTypeSelect.focus();
      return;
    }
    if (!userName) {
      alert('Please enter your name.');
      document.getElementById('user-name').focus();
      return;
    }

    let message = `Hello Oh My Nosh! I have a ${enquiryType.charAt(0).toUpperCase() + enquiryType.slice(1)} enquiry.%0AName: ${encodeURIComponent(userName)}%0A`;

    if (enquiryType === 'wedding') {
      const weddingDate = document.getElementById('wedding-date').value;
      const weddingBudget = document.getElementById('wedding-budget').value.trim();
      const weddingIdeas = document.getElementById('wedding-ideas').value.trim();
      const imageFile = document.getElementById('wedding-image').files[0];

      if (!weddingDate) {
        alert('Please enter the wedding date.');
        document.getElementById('wedding-date').focus();
        return;
      }
      if (!weddingBudget) {
        alert('Please enter the wedding budget.');
        document.getElementById('wedding-budget').focus();
        return;
      }

      message += `Wedding Date: ${encodeURIComponent(weddingDate)}%0ABudget: ${encodeURIComponent(weddingBudget)}%0AIdeas: ${encodeURIComponent(weddingIdeas || 'N/A')}`;

      if (imageFile) {
        alert('Note: Images cannot be sent via this form. After submitting, please upload the image directly inside WhatsApp.');
      }
    }
    else if (enquiryType === 'kids') {
      const childName = document.getElementById('child-name').value.trim();
      const ageGroup = document.getElementById('age-group').value;
      const classDate = document.getElementById('class-date').value;
      const parentEmail = document.getElementById('parent-email').value.trim();
      const kidsMsg = document.getElementById('kids-message').value.trim();

      if (!childName) {
        alert("Please enter the child's name.");
        document.getElementById('child-name').focus();
        return;
      }
      if (!ageGroup) {
        alert("Please select the child's age group.");
        document.getElementById('age-group').focus();
        return;
      }
      if (!classDate) {
        alert('Please enter the desired class date.');
        document.getElementById('class-date').focus();
        return;
      }
      if (!parentEmail) {
        alert("Please enter the parent's email.");
        document.getElementById('parent-email').focus();
        return;
      }

      message += `Child's Name: ${encodeURIComponent(childName)}%0AAge Group: ${encodeURIComponent(ageGroup)}%0AClass Date: ${encodeURIComponent(classDate)}%0AParent's Email: ${encodeURIComponent(parentEmail)}%0AAdditional Message: ${encodeURIComponent(kidsMsg || 'N/A')}`;
    }
    else if (enquiryType === 'birthday') {
      const birthdayDate = document.getElementById('birthday-date').value;
      const birthdayMsg = document.getElementById('birthday-message').value.trim();

      if (!birthdayDate) {
        alert('Please enter the birthday date.');
        document.getElementById('birthday-date').focus();
        return;
      }

      message += `Birthday Date: ${encodeURIComponent(birthdayDate)}%0AAdditional Message: ${encodeURIComponent(birthdayMsg || 'N/A')}`;
    }
    else if (enquiryType === 'general') {
      const generalMsg = document.getElementById('general-message').value.trim();
      if (!generalMsg) {
        alert('Please enter your message.');
        document.getElementById('general-message').focus();
        return;
      }
      message += `Message: ${encodeURIComponent(generalMsg)}`;
    }

    // Construct WhatsApp URL
    const url = `https://wa.me/${phoneNumber}?text=${message}`;

    // Open WhatsApp link in new tab/window
    window.open(url, '_blank');

    closeModal();
  });
</script>

</body>
</html>
